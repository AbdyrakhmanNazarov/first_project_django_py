{% extends 'base.html' %}
{% load static %}

{% block blocktitle %}
  Admin Dashboard
{% endblock %}

{% block content %}
  <main class="cont_min_page">
    
    {% if messages %}
      <div class="messages">
        {% for message in messages %}
          <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    <div class="content-block">
      <h1>Добро пожаловать, {{ user.username }}!</h1>
      <p>Используйте кнопки ниже для управления студентами, группами и тегами.</p>

      <div style="margin-top: 10px; display: flex; gap: 10px;">
        <form method="post" action="{% url 'custom_admin:delete_session' %}">
          {% csrf_token %}
          <button type="submit" class="submit-btn">Удалить сессию</button>
        </form>

        <form method="post" action="{% url 'custom_admin:delete_cookie' %}">
          {% csrf_token %}
          <button type="submit" class="submit-btn">Удалить куки</button>
        </form>
      </div>
    </div>

    <div class="content-block" style="display: flex; gap: 15px; flex-wrap: wrap; margin-top: 20px;">
      <a href="{% url 'custom_admin:user_list' %}" class="edit-btn">Пользователи</a>
      <a href="{% url 'custom_admin:student_list' %}" class="edit-btn">Студенты</a>
      <a href="{% url 'custom_admin:create_group' %}" class="submit-btn">Добавить группу</a>
      <a href="{% url 'custom_admin:create_tag' %}" class="submit-btn">Добавить теги</a>
    </div>

    <div class="content-block" style="margin-top: 40px;">
      <h2>Ваша активность</h2>

      {% if request.session.liked_students %}
        <p>Лайкнутые студенты (ID): {{ request.session.liked_students }}</p>
      {% else %}
        <p>Пока нет лайкнутых студентов.</p>
      {% endif %}

      {% if request.session.cart %}
        <p>В корзине студентов: {{ request.session.cart|length }}</p>
        <div style="display: flex; gap: 10px; margin-top: 5px;">
          <a href="{% url 'custom_admin:cart_view' %}" class="submit-btn">Просмотр корзины</a>
          <a href="{% url 'custom_admin:clear_cart' %}" class="submit-btn">Очистить корзину</a>
        </div>
      {% else %}
        <p>Корзина пуста.</p>
      {% endif %}
    </div>
  </main>
{% endblock %}
